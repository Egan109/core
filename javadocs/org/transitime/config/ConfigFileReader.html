<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_40) on Fri Sep 04 18:09:06 PDT 2015 -->
<title>ConfigFileReader</title>
<meta name="date" content="2015-09-04">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConfigFileReader";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConfigFileReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/transitime/config/BooleanConfigValue.html" title="class in org.transitime.config"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/config/ConfigFileReader.html" target="_top">Frames</a></li>
<li><a href="ConfigFileReader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.transitime.config</div>
<h2 title="Class ConfigFileReader" class="title">Class ConfigFileReader</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.transitime.config.ConfigFileReader</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConfigFileReader</span>
extends java.lang.Object</pre>
<div class="block">The ConfigFile class provides a way of handling parameters that can be
 updated without having to restart the application. The parameters can be
 access efficiently so that they can be accessed in loops that are frequently
 executed. This class is useful for parameters that are system wide and often
 have a default. Such params are not best stored in a database because with a
 db it can be harder to see what all the values are or to copy the values from
 one project to another. It can also be harder to keep track of changes when
 such params are in a database.
 <p>
 An additional goal of Config is for all params to be processed when the
 config file is read, both at startup and when file is reread. This is
 important because then if there are any processing problems those problems
 are noticed and must be dealt with immediately (instead of them occurring in
 an lazy fashion, perhaps when no one is available to deal with them). But
 this goal would mean that the params would need to be defined in config files
 so they would all be dealt with at startup. For many situations want the
 params to be defined where they are used since that would make them easier to
 support. But then they wouldn't get initialized until the Java class is
 actually accessed.
 <p>
 For each parameter configured in the file the property is written as a system
 property if that system property is not yet defined. This way all parameters
 are available as system properties, even non-transitime ones such as for
 hibernate or logback. Java properties set on the command line take precedence
 since the properties are not overwritten if already set.
 <p>
 The params are configured in an XML or a properties file. The member
 processConfig() first process a file named transitime.properties if one
 exists in the classpath. Then files specified by the Java system property
 transitime.configFiles . If the file has a .xml suffix then it will be
 processed as XML. Otherwise it will be processed as a regular properties
 file. Multiple config files can be used. Each XML file should have a
 corresponding configuration class such as CoreConfig.java. In the
 XXXConfig.java class the params are specified along with default values.
 <p>
 Multiple threads can read parameters simultaneously. The threads should call
 readLock() if it is important to update the parameters in a consistent way,
 such as when more than a single parameter are interrelated.
 <p>
 Logback error logging is not used in this class so that logback can be not
 accessed until after the configuration is processed. In this way logback can
 be configured using a configuration file to set any logback Java system
 properties such as logback.configurationFile .</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>SkiBu Smith</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config">ConfigFileReader.ConfigException</a></span></code>
<div class="block">An exception for when a parameter is being read in</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#ConfigFileReader--">ConfigFileReader</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#processConfig--">processConfig</a></span>()</code>
<div class="block">Process the configuration file specified by a file named
 transitime.properties that is in the classpath.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#processConfig-java.lang.String-">processConfig</a></span>(java.lang.String&nbsp;fileName)</code>
<div class="block">Processes specified config file and overrides the config parameters
 accordingly.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#readLock--">readLock</a></span>()</code>
<div class="block">When reading config params should lock up the system so that data is
 consistent.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#readUnlock--">readUnlock</a></span>()</code>
<div class="block">Every time readLock() is called there needs to be a call to readUnlock().</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/transitime/config/ConfigFileReader.html#readXmlConfigFile-java.lang.String-">readXmlConfigFile</a></span>(java.lang.String&nbsp;fileName)</code>
<div class="block">Reads the specified XML file and stores the results into a HashMap configFileData.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConfigFileReader--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConfigFileReader</h4>
<pre>public&nbsp;ConfigFileReader()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="readXmlConfigFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readXmlConfigFile</h4>
<pre>public static&nbsp;void&nbsp;readXmlConfigFile(java.lang.String&nbsp;fileName)
                              throws <a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config">ConfigFileReader.ConfigException</a></pre>
<div class="block">Reads the specified XML file and stores the results into a HashMap configFileData.
 The file is expected to be very simple. Attributes are ignored. Only
 values are used. The keys for the resulting HashMap are based on
 the XML tags and their nesting. So if one is setting a value of 75
 to a param with a key transitime.predictor.allowableDistanceFromPath 
 the XML would look like:
 <code>&lt;transitime&gt;
   &lt;predictor&gt;
     &lt;allowableDistanceFromPath&gt;
       75.0
     &lt;/allowableDistanceFromPath&gt;
   &lt;/predictor&gt;
 &lt;/transitime&gt;
 </code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fileName</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config">ConfigFileReader.ConfigException</a></code></dd>
</dl>
</li>
</ul>
<a name="readLock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLock</h4>
<pre>public static&nbsp;void&nbsp;readLock()</pre>
<div class="block">When reading config params should lock up the system so that data is
 consistent. This is a good idea because even though each individual
 param is atomic there could be situations where multiple interdependent
 params are being used and don't want a write to change them between
 access.
 
 The expectation is that the program is event driven. When an event
 is processed then a single call to readLock() and readUnlock() can
 protect the entire code where parameters might be read. The intent
 is not to read lock each single access of data.
 
 Every time readLock() is called there needs to be a corresponding call
 to readUnlock(). Since this important the readUnlock() should be in
 a finally block. For example:
 try {
     readLock();
     ...; // Read access the data
   } finally {
     readUnlock();
   }</div>
</li>
</ul>
<a name="readUnlock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readUnlock</h4>
<pre>public static&nbsp;void&nbsp;readUnlock()</pre>
<div class="block">Every time readLock() is called there needs to be a call to readUnlock().
 Since this is important the readUnlock() should be called in a finally 
 block. See readLock() for details.</div>
</li>
</ul>
<a name="processConfig-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processConfig</h4>
<pre>public static&nbsp;void&nbsp;processConfig(java.lang.String&nbsp;fileName)
                          throws <a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config">ConfigFileReader.ConfigException</a>,
                                 <a href="../../../org/transitime/config/ConfigValue.ConfigParamException.html" title="class in org.transitime.config">ConfigValue.ConfigParamException</a></pre>
<div class="block">Processes specified config file and overrides the config parameters
 accordingly. This way can use an XML config file instead of -D Java
 properties to set configuration parameters.
 <p>
 Reads in data and stores it in the config objects so that it is
 programmatically accessible. Does a write lock so that readers will only
 execute when data is not being modified.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fileName</code> - Name of the config file. If null then default values will be
            used for each parameter.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config">ConfigFileReader.ConfigException</a></code></dd>
<dd><code><a href="../../../org/transitime/config/ConfigValue.ConfigParamException.html" title="class in org.transitime.config">ConfigValue.ConfigParamException</a></code></dd>
</dl>
</li>
</ul>
<a name="processConfig--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processConfig</h4>
<pre>public static&nbsp;void&nbsp;processConfig()</pre>
<div class="block">Process the configuration file specified by a file named
 transitime.properties that is in the classpath. The processes
 configuration files specified by the Java system property
 transitime.configFiles. The transitime.configFiles property is a ";"
 separated list so can specify multiple files. The files can be either in
 either XML or in Java properties format.
 <p>
 All parameters found will be set as system properties unless the system
 property was already set. This way Java system properties set on the
 command line have precedence.
 <p>
 By making all read parameters Java system properties they can be used for
 external libraries such as for specifying hibernate or logback config
 files.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConfigFileReader.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/transitime/config/BooleanConfigValue.html" title="class in org.transitime.config"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/transitime/config/ConfigFileReader.ConfigException.html" title="class in org.transitime.config"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/config/ConfigFileReader.html" target="_top">Frames</a></li>
<li><a href="ConfigFileReader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
